/* ===================================================
 * ZL Framework
 * https://zoolanders.com/extensions/zl-framework
 * ===================================================
 * Copyright (C) JOOlanders SL
 * http://www.gnu.org/licenses/gpl-2.0.html GNU/GPLv2 only
 * ========================================================== */
!function(a){jQuery.fn.dataTableExt.oApi.fnGetColumnData=function(a,b,c,d,e){if("undefined"==typeof b)return[];"undefined"==typeof c&&(c=!0),"undefined"==typeof d&&(d=!0),"undefined"==typeof e&&(e=!0);var f;f=1==d?a.aiDisplay:a.aiDisplayMaster;for(var g=new Array,h=0,i=f.length;i>h;h++){iRow=f[h];var j=this.fnGetData(iRow,b);(1!=e||0!=j.length)&&(1==c&&jQuery.inArray(j,g)>-1||g.push(j))}return g},a.fn.dataTableExt.oApi.fnReloadAjax=function(a,b,c,d){if("undefined"!=typeof b&&null!=b&&(a.sAjaxSource=b),a.oFeatures.bServerSide)return void this.fnDraw();this.oApi._fnProcessingDisplay(a,!0);var e=this,f=a._iDisplayStart,g=[];this.oApi._fnServerParams(a,g),a.fnServerData.call(a.oInstance,a.sAjaxSource,g,function(b){e.oApi._fnClearTable(a);for(var g=""!==a.sAjaxDataProp?e.oApi._fnGetObjectDataFn(a.sAjaxDataProp)(b):b,h=0;h<g.length;h++)e.oApi._fnAddData(a,g[h]);a.aiDisplay=a.aiDisplayMaster.slice(),"undefined"!=typeof d&&d===!0?(a._iDisplayStart=f,e.fnDraw(!1)):e.fnDraw(),e.oApi._fnProcessingDisplay(a,!1),"function"==typeof c&&null!=c&&c(a)},a)},a.fn.dataTableExt.aoFeatures.push({fnInit:function(a){return new b(a)},cFeature:"F",sFeature:"Filtering"});var b=function(b){var d=a('<div class="zlux-x-filter-input_wrapper" />'),e=null;return a('<input type="text" class="zlux-x-filter-input" />').on("keyup",function(d){var f=a(this).val();clearTimeout(e),""==f&&c(b,"");var g=d.keyCode?d.keyCode:d.which;13==g&&c(b,f),e=setTimeout(function(){c(b,f)},500)}).appendTo(d),d[0]},c=function(a,b){b!=a.oPreviousSearch.sSearch&&a.oInstance.fnFilter(b)};a.extend(!0,a.fn.dataTable.defaults,{sDom:"<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",sPaginationType:"bootstrap",oLanguage:{sProcessing:'<span class="zlux-loader-circle-big"></span>',sLengthMenu:"_MENU_ records per page"},bProcessing:!1,bLengthChange:!1}),a.extend(a.fn.dataTableExt.oStdClasses,{sWrapper:"dataTables_wrapper form-horizontal zlux-datatables",sStripeOdd:"",sStripeEven:""}),a.fn.dataTableExt.oApi.fnPagingInfo=function(a){return{iStart:a._iDisplayStart,iEnd:a.fnDisplayEnd(),iLength:a._iDisplayLength,iTotal:a.fnRecordsTotal(),iFilteredTotal:a.fnRecordsDisplay(),iPage:-1===a._iDisplayLength?0:Math.ceil(a._iDisplayStart/a._iDisplayLength),iTotalPages:-1===a._iDisplayLength?0:Math.ceil(a.fnRecordsDisplay()/a._iDisplayLength)}};var d=function(a){a.aoDrawCallback.push({fn:function(){for(var b=a.oInstance.fnPagingInfo().iTotalPages>1,c=0,d=a.aanFeatures.p.length;d>c;c++)a.aanFeatures.p[c].style.display=b?"block":"none"},sName:"PagingControl"})};a.fn.dataTableExt.aoFeatures.push({fnInit:function(a){new d(a)},cFeature:"P",sFeature:"PagingControl"}),a.extend(a.fn.dataTableExt.oPagination,{bootstrap:{fnInit:function(b,c,d){var e=(b.oLanguage.oPaginate,function(a){a.preventDefault(),b.oApi._fnPageChange(b,a.data.action)&&d(b)});a(c).addClass("pagination").append('<ul class="zlux-x-pagination"><li class="first disabled"><a href="#" class="zlux-x-btn"><i class="icon-double-angle-left"></i></a></li><li class="prev disabled"><a href="#" class="zlux-x-btn"><i class="icon-angle-left"></i></a></li><li class="next disabled"><a href="#" class="zlux-x-btn"><i class="icon-angle-right"></i></a></li><li class="last disabled"><a href="#" class="zlux-x-btn"><i class="icon-double-angle-right"></i></a></li></ul>');var f=a("a",c);a(f[0]).bind("click.DT",{action:"first"},e),a(f[1]).bind("click.DT",{action:"previous"},e),a(f[2]).bind("click.DT",{action:"next"},e),a(f[3]).bind("click.DT",{action:"last"},e)},fnUpdate:function(b,c){var d,e,f,g,h,i,j=4,k=b.oInstance.fnPagingInfo(),l=b.aanFeatures.p,m=Math.floor(j/2);for(k.iTotalPages<j?(h=1,i=k.iTotalPages):k.iPage<=m?(h=1,i=j):k.iPage>=k.iTotalPages-m?(h=k.iTotalPages-j+1,i=k.iTotalPages):(h=k.iPage-m+1,i=h+j-1),d=0,e=l.length;e>d;d++){for(a("li:gt(1)",l[d]).filter(":not(:last)").not(".next").remove(),f=h;i>=f;f++)g=f==k.iPage+1?'class="active"':"",a("<li "+g+'><a href="#">'+f+"</a></li>").insertBefore(a("li.next, li.last",l[d])[0]).bind("click",function(d){d.preventDefault(),b._iDisplayStart=(parseInt(a("a",this).text(),10)-1)*k.iLength,c(b)});0===k.iPage?a("li.first, li.prev",l[d]).addClass("disabled"):a("li.first, li.prev",l[d]).removeClass("disabled"),k.iPage===k.iTotalPages-1||0===k.iTotalPages?a("li.next, li.last",l[d]).addClass("disabled"):a("li.next, li.last",l[d]).removeClass("disabled")}}}})}(jQuery);