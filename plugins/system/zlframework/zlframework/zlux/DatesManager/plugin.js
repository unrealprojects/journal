/* ===================================================
 * ZL Framework
 * https://zoolanders.com/extensions/zl-framework
 * ===================================================
 * Copyright (C) JOOlanders SL
 * http://www.gnu.org/licenses/gpl-2.0.html GNU/GPLv2 only
 * ========================================================== */
!function(a){"use strict";var b=function(){};a.extend(b.prototype,a.zlux.Manager.prototype,{name:"datesManager",initialize:function(b,c){this.options=a.extend({},this.options,c);var d=this;d.initCheck(),d.target=b,d.date=a('<div class="zl-bootstrap zlux-datesmanager" />').appendTo(b)},initCheck:function(){var b=this;a.zlux.datesManager.iNextUnique++,b.ID=a.zlux.datesManager.iNextUnique}}),a.zlux[b.prototype.name]=b,a.zlux[b.prototype.name].iNextUnique=0}(jQuery,window,document),function(a){"use strict";var b=function(c,d){var e=this,f=a(c);f.data(b.prototype.name)||(e.element=a(c),e.options=a.extend({},b.prototype.options,a.zlux.datesManager.prototype.options,d),this.events={},e.initialize(),e.element.data(b.prototype.name,e))};a.extend(b.prototype,a.zlux.datesManager.prototype,{name:"datesDialogManager",options:{title:"Dates Manager",position:{},full_mode:0,dialogClass:"",mode:"date",firstDay:0},initialize:function(){var a=this;a.initCheck(),a.element.on("click",function(){return a.zluxdialog.toggle(),!1}),a.initDialog(),a.initMainEvents()},initDialog:function(){var b=this;b.options.dialogClass="zl-bootstrap zlux-datesmanager zlux-datesmanager-"+b.options.mode+(b.options.full_mode?" zlux-dialog-full ":"")+(b.options.dialogClass?" "+b.options.dialogClass:""),a.zlux.assets.load("dialog").done(function(){b.zluxdialog=a.zlux.dialog({title:b.options.title,width:b.options.full_mode?"75%":300,dialogClass:b.options.dialogClass,scrollbar:!1,position:a.extend({of:b.element,my:"left top",at:"right bottom"},b.options.position)}).bind("InitComplete",function(){b.zluxdialog.widget.attr("id","zluxDatesManager_"+b.ID),b.eventDialogLoaded()})})},eventDialogLoaded:function(){var b=this;b.datesmanager=a('<div class="zlux-datesmanager" />').appendTo(b.zluxdialog.content),a("html").on("mousedown",function(a){!b.zluxdialog.dialog("isOpen")||b.element.is(a.target)||b.element.find(a.target).length||b.zluxdialog.widget.find(a.target).length||b.zluxdialog.widget.is(a.target)||b.zluxdialog.dialog("close")});var c={dateFormat:a.datepicker.ISO_8601,constrainInput:!1,prevText:"",nextText:"",firstDay:b.options.firstDay,onSelect:function(a){b.trigger("DateSelected",a)}};"date"===b.options.mode?b.datesmanager.datepicker(c).datepicker("show"):b.datesmanager.datetimepicker(a.extend(c,{timeFormat:a.ui.timepicker.version="hh:mm:ss",showSecond:!1,timeOnly:"time"===b.options.mode?!0:!1})).datetimepicker("show"),b.trigger("InitComplete")},initMainEvents:function(){var a=this;a.bind("InitComplete",function(){a.zluxdialog.initContent()})}}),a.zlux[b.prototype.name]=b}(jQuery,window,document);